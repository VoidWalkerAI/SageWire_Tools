<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SageWire Tools – Relic Spray Tank Mix Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    /* ========= COLOR SYSTEM (AUTO LIGHT/DARK) ========= */
    :root {
      /* Light mode defaults */
      --sw-bg: #f3f4f6;
      --sw-card-bg: #ffffff;
      --sw-text: #111827;
      --sw-muted: #6b7280;
      --sw-border: #e5e7eb;
      --sw-button-bg: #111827;
      --sw-button-text: #ffffff;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --sw-bg: #020617;
        --sw-card-bg: #020617;
        --sw-text: #e5e7eb;
        --sw-muted: #9ca3af;
        --sw-border: #1f2933;
        --sw-button-bg: #e5e7eb;
        --sw-button-text: #020617;
      }
    }

    /* ========= GLOBAL LAYOUT ========= */
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--sw-bg);
      color: var(--sw-text);
      margin: 0;
      padding: 1.5rem;
    }
    .sw-page {
      max-width: 800px;
      margin: 0 auto;
    }

    /* ========= HEADER ========= */
    .sw-header {
      background: var(--sw-card-bg);
      border-radius: 0.75rem;
      border: 1px solid var(--sw-border);
      padding: 0.75rem 1rem;
      margin-bottom: 1rem;
    }
    .sw-logo {
      font-weight: 700;
      letter-spacing: 0.03em;
    }
    .sw-tagline {
      font-size: 0.85rem;
      color: var(--sw-muted);
    }

    /* ========= TOOL CARD ========= */
    .sw-tool-card {
      background: var(--sw-card-bg);
      border-radius: 0.75rem;
      border: 1px solid var(--sw-border);
      padding: 1.25rem 1.5rem;
      box-shadow: 0 10px 15px rgba(15, 23, 42, 0.05);
    }
    h1 {
      font-size: 1.5rem;
      margin: 0 0 0.4rem 0;
    }
    .sw-desc {
      font-size: 0.95rem;
      color: var(--sw-muted);
      margin-bottom: 1rem;
    }

    /* ========= FORM ELEMENTS ========= */
    label {
      display: block;
      margin-top: 0.9rem;
      font-size: 0.9rem;
    }
    input, select {
      width: 100%;
      padding: 0.45rem 0.55rem;
      margin-top: 0.25rem;
      border-radius: 0.5rem;
      border: 1px solid var(--sw-border);
      box-sizing: border-box;
      font-size: 0.95rem;
      background: var(--sw-bg);
      color: var(--sw-text);
    }
    input:focus, select:focus {
      outline: none;
      border-color: var(--sw-button-bg);
      box-shadow: 0 0 0 1px var(--sw-button-bg);
    }

    .sw-row {
      display: flex;
      gap: 0.75rem;
      margin-top: 0.9rem;
    }
    .sw-row > div {
      flex: 1;
    }

    button {
      margin-top: 1.1rem;
      padding: 0.6rem 1.1rem;
      border-radius: 0.6rem;
      border: none;
      cursor: pointer;
      background: var(--sw-button-bg);
      color: var(--sw-button-text);
      font-size: 0.95rem;
    }
    button:active {
      transform: translateY(1px);
    }

    .sw-result {
      margin-top: 1rem;
      font-weight: 600;
    }
    .sw-note {
      margin-top: 0.4rem;
      font-size: 0.9rem;
      color: var(--sw-muted);
    }

    .sw-section-title {
      margin-top: 1.2rem;
      font-weight: 600;
      font-size: 0.95rem;
      border-top: 1px solid var(--sw-border);
      padding-top: 0.8rem;
    }

    .product-block {
      border: 1px solid var(--sw-border);
      border-radius: 0.6rem;
      padding: 0.75rem;
      margin-top: 0.8rem;
    }
    .product-title {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.25rem;
    }
  </style>
</head>
<body>
  <div class="sw-page">
    <!-- ===== SAGEWIRE HEADER ===== -->
    <header class="sw-header">
      <div class="sw-logo">SageWire Tools</div>
      <div class="sw-tagline">We tend the fire while you're out living life.</div>
    </header>

    <!-- ===== TOOL CARD ===== -->
    <section class="sw-tool-card">
      <h1>Relic Spray Tank Mix Calculator</h1>
      <p class="sw-desc">
        Calculate product amounts per tank and for the whole job from label rates.
        Enter spray volume in GPA and tank size in gallons. Then set product rates in label units.
        Always follow label directions and local regulations – this tool only does the math.
      </p>

      <div class="sw-row">
        <div>
          <label>
            Tank size (gal):
            <input type="number" id="tankSize" placeholder="e.g. 500" step="1" min="0">
          </label>
        </div>
        <div>
          <label>
            Spray volume (GPA – gal/acre):
            <input type="number" id="gpa" placeholder="e.g. 15" step="0.1" min="0">
          </label>
        </div>
      </div>

      <label>
        Total acres to spray (optional – for tanks needed & total product):
        <input type="number" id="totalAcres" placeholder="e.g. 80" step="0.1" min="0">
      </label>

      <div class="sw-section-title">Products in the Tank</div>

      <!-- Product A -->
      <div class="product-block">
        <div class="product-title">Product A</div>
        <div class="sw-row">
          <div>
            <label>
              Name (optional):
              <input type="text" id="prodAName" placeholder="e.g. Herbicide A">
            </label>
          </div>
          <div>
            <label>
              Rate per acre:
              <input type="number" id="prodARate" placeholder="e.g. 1.5" step="0.01" min="0">
            </label>
          </div>
          <div>
            <label>
              Units:
              <select id="prodAUnit">
                <option value="oz">oz/acre</option>
                <option value="pt">pt/acre</option>
                <option value="qt">qt/acre</option>
                <option value="gal">gal/acre</option>
                <option value="lb">lb/acre</option>
              </select>
            </label>
          </div>
        </div>
      </div>

      <!-- Product B -->
      <div class="product-block">
        <div class="product-title">Product B</div>
        <div class="sw-row">
          <div>
            <label>
              Name (optional):
              <input type="text" id="prodBName" placeholder="e.g. Herbicide B">
            </label>
          </div>
          <div>
            <label>
              Rate per acre:
              <input type="number" id="prodBRate" placeholder="e.g. 0.75" step="0.01" min="0">
            </label>
          </div>
          <div>
            <label>
              Units:
              <select id="prodBUnit">
                <option value="oz">oz/acre</option>
                <option value="pt">pt/acre</option>
                <option value="qt">qt/acre</option>
                <option value="gal">gal/acre</option>
                <option value="lb">lb/acre</option>
              </select>
            </label>
          </div>
        </div>
      </div>

      <!-- Product C -->
      <div class="product-block">
        <div class="product-title">Product C</div>
        <div class="sw-row">
          <div>
            <label>
              Name (optional):
              <input type="text" id="prodCName" placeholder="e.g. Adjuvant">
            </label>
          </div>
          <div>
            <label>
              Rate per acre:
              <input type="number" id="prodCRate" placeholder="e.g. 1" step="0.01" min="0">
            </label>
          </div>
          <div>
            <label>
              Units:
              <select id="prodCUnit">
                <option value="oz">oz/acre</option>
                <option value="pt">pt/acre</option>
                <option value="qt">qt/acre</option>
                <option value="gal">gal/acre</option>
                <option value="lb">lb/acre</option>
              </select>
            </label>
          </div>
        </div>
      </div>

      <button type="button" onclick="calculateTankMix()">
        Calculate Tank Mix
      </button>

      <div id="result" class="sw-result"></div>
      <div id="note" class="sw-note"></div>
    </section>
  </div>

  <script>
    function acresPerTank(tankGal, gpa) {
      if (gpa <= 0) return 0;
      return tankGal / gpa;
    }

    function rateToOzPerAcre(rate, unit) {
      if (rate <= 0) return 0;
      switch (unit) {
        case 'oz':
          return rate;
        case 'pt':
          return rate * 16;      // 1 pt = 16 fl oz
        case 'qt':
          return rate * 32;      // 1 qt = 32 fl oz
        case 'gal':
          return rate * 128;     // 1 gal = 128 fl oz
        case 'lb':
          // For dry products, treat rate as lb/acre – keep in lb, not oz.
          // We'll handle this separately – return 0 here so we know it's not liquid.
          return 0;
        default:
          return 0;
      }
    }

    function ozToGallons(oz) {
      if (oz <= 0) return 0;
      return oz / 128.0;
    }

    function calculateProduct(tankAcres, totalAcres, rate, unit, nameFallback) {
      if (isNaN(rate) || rate <= 0 || tankAcres <= 0) {
        return null;
      }

      const isDry = (unit === 'lb');
      let perTankLabel = rate * tankAcres; // start with label units

      let liquidPerTankGal = 0;
      if (!isDry) {
        const ozPerAcre = rateToOzPerAcre(rate, unit);
        const ozPerTank = ozPerAcre * tankAcres;
        liquidPerTankGal = ozToGallons(ozPerTank);
      }

      let totalLabel = null;
      let totalGal = null;

      if (!isNaN(totalAcres) && totalAcres > 0) {
        const tanksNeeded = totalAcres / tankAcres;
        totalLabel = perTankLabel * tanksNeeded;
        if (!isDry) {
          totalGal = liquidPerTankGal * tanksNeeded;
        }
      }

      return {
        nameFallback,
        rate,
        unit,
        perTankLabel,
        liquidPerTankGal,
        totalLabel,
        totalGal
      };
    }

    function calculateTankMix() {
      const tankSize = parseFloat(document.getElementById('tankSize').value);
      const gpa = parseFloat(document.getElementById('gpa').value);
      const totalAcres = parseFloat(document.getElementById('totalAcres').value);

      const resultEl = document.getElementById('result');
      const noteEl = document.getElementById('note');
      resultEl.innerHTML = '';
      noteEl.textContent = '';

      if (isNaN(tankSize) || tankSize <= 0 || isNaN(gpa) || gpa <= 0) {
        resultEl.textContent = 'Please enter a valid tank size (gal) and spray volume (GPA).';
        return;
      }

      const tankAcres = acresPerTank(tankSize, gpa);

      if (!isFinite(tankAcres) || tankAcres <= 0) {
        resultEl.textContent = 'Something went wrong with the acres-per-tank calculation. Check your inputs.';
        return;
      }

      let tanksNeeded = null;
      if (!isNaN(totalAcres) && totalAcres > 0) {
        tanksNeeded = totalAcres / tankAcres;
      }

      const prodA = calculateProduct(
        tankAcres,
        totalAcres,
        parseFloat(document.getElementById('prodARate').value),
        document.getElementById('prodAUnit').value,
        document.getElementById('prodAName').value || 'Product A'
      );
      const prodB = calculateProduct(
        tankAcres,
        totalAcres,
        parseFloat(document.getElementById('prodBRate').value),
        document.getElementById('prodBUnit').value,
        document.getElementById('prodBName').value || 'Product B'
      );
      const prodC = calculateProduct(
        tankAcres,
        totalAcres,
        parseFloat(document.getElementById('prodCRate').value),
        document.getElementById('prodCUnit').value,
        document.getElementById('prodCName').value || 'Product C'
      );

      let html =
        'Acres covered per full tank: ' + tankAcres.toFixed(2) + ' acres<br>';

      if (tanksNeeded !== null && isFinite(tanksNeeded) && tanksNeeded > 0) {
        html += 'Tanks needed for ' + totalAcres.toFixed(2) +
                ' acres: ' + tanksNeeded.toFixed(2) + ' tank(s)<br><br>';
      } else {
        html += '<br>';
      }

      function productHtml(prod) {
        if (!prod) return '';
        let line = '<strong>' + prod.nameFallback + '</strong><br>' +
          '• Per tank: ' + prod.perTankLabel.toFixed(3) + ' ' + prod.unit;
        if (prod.unit !== 'lb' && prod.liquidPerTankGal > 0) {
          line += ' (≈ ' + prod.liquidPerTankGal.toFixed(3) + ' gal)';
        }
        if (prod.totalLabel !== null && prod.totalLabel > 0) {
          line += '<br>• Total for job: ' +
            prod.totalLabel.toFixed(3) + ' ' + prod.unit;
          if (prod.unit !== 'lb' && prod.totalGal !== null && prod.totalGal > 0) {
            line += ' (≈ ' + prod.totalGal.toFixed(3) + ' gal)';
          }
        }
        line += '<br><br>';
        return line;
      }

      html += productHtml(prodA);
      html += productHtml(prodB);
      html += productHtml(prodC);

      if (html.endsWith('<br><br>')) {
        // trim last extra break
        html = html.replace(/<br><br>$/, '');
      }

      resultEl.innerHTML = html;

      noteEl.textContent =
        'This tool only does the math from label rates. Always follow product labels, observe maximum per-acre and per-season limits, ' +
        'and comply with all local regulations and agronomist recommendations.';
    }
  </script>
</body>
</html>